{% extends 'base.html.twig' %}

{% block title %}Edit Transaction Log - MongoDB{% endblock %}

{% block body %}
{% include '_breadcrumbs.html.twig' with {entityName: 'Transaction Logs', isMongo: true, routePrefix: 'mongodb_transaction_log', currentPage: 'Edit'} %}
<div class="mb-3">
    <a href="{{ path('mongodb_transaction_log_index') }}" class="btn btn-outline-secondary">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
        </svg>
        Back to List
    </a>
</div>
<div class="card shadow-sm">
    <div class="card-header">
        <h2 class="mb-0">Edit Transaction Log <span class="badge bg-info connection-badge">MongoDB</span></h2>
    </div>
    <div class="card-body">
        <form method="post">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="transactionId" class="form-label">Transaction ID *</label>
                    <input type="text" class="form-control" id="transactionId" name="transactionId" value="{{ transaction.transactionId }}" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="customerEmail" class="form-label">Customer Email *</label>
                    <input type="email" class="form-control" id="customerEmail" name="customerEmail" value="{{ transaction.customerEmail }}" required>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="iban" class="form-label">IBAN</label>
                    <input type="text" class="form-control" id="iban" name="iban" value="{{ transaction.iban ?? '' }}">
                </div>
                <div class="col-md-6 mb-3">
                    <label for="creditCard" class="form-label">Credit Card</label>
                    <input type="text" class="form-control" id="creditCard" name="creditCard" value="{{ transaction.creditCard ?? '' }}">
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="maskedCard" class="form-label">Masked Card</label>
                    <input type="text" class="form-control" id="maskedCard" name="maskedCard" value="{{ transaction.maskedCard ?? '' }}">
                </div>
                <div class="col-md-6 mb-3">
                    <label for="transactionHash" class="form-label">Transaction Hash</label>
                    <input type="text" class="form-control" id="transactionHash" name="transactionHash" value="{{ transaction.transactionHash ?? '' }}">
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="amount" class="form-label">Amount *</label>
                    <input type="number" step="0.01" class="form-control" id="amount" name="amount" value="{{ transaction.amount }}" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="currency" class="form-label">Currency *</label>
                    <select class="form-select" id="currency" name="currency" required>
                        <option value="EUR" {{ transaction.currency == 'EUR' ? 'selected' : '' }}>EUR</option>
                        <option value="USD" {{ transaction.currency == 'USD' ? 'selected' : '' }}>USD</option>
                        <option value="GBP" {{ transaction.currency == 'GBP' ? 'selected' : '' }}>GBP</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="status" class="form-label">Status *</label>
                    <select class="form-select" id="status" name="status" required>
                        <option value="pending" {{ transaction.status == 'pending' ? 'selected' : '' }}>Pending</option>
                        <option value="completed" {{ transaction.status == 'completed' ? 'selected' : '' }}>Completed</option>
                        <option value="failed" {{ transaction.status == 'failed' ? 'selected' : '' }}>Failed</option>
                        <option value="refunded" {{ transaction.status == 'refunded' ? 'selected' : '' }}>Refunded</option>
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="transactionDate" class="form-label">Transaction Date</label>
                    <input type="datetime-local" class="form-control" id="transactionDate" name="transactionDate" value="{{ transaction.transactionDate ? transaction.transactionDate.toDateTime()|date('Y-m-d\\TH:i') : '' }}">
                </div>
            </div>
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary">Update</button>
                <a href="{{ path('mongodb_transaction_log_index') }}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
