{% extends 'base.html.twig' %}

{% block title %}Notification #{{ notification.id }} - {{ connection|upper }}{% endblock %}

{% block body %}
{% include '_breadcrumbs.html.twig' with {entityName: 'Notifications (Polymorphic STI)', connection: connection, currentPage: 'Show', routePrefix: 'notification', listRoute: 'notification_index'} only %}

<div class="card shadow-sm">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h2 class="mb-0">Notification #{{ notification.id }} <span class="badge bg-{{ notification_type == 'email' ? 'primary' : 'secondary' }}">{{ notification_type }}</span></h2>
        <a href="{{ path('notification_index', {connection: connection}) }}" class="btn btn-outline-primary">Back to list</a>
    </div>
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-3">ID</dt>
            <dd class="col-sm-9">{{ notification.id }}</dd>

            <dt class="col-sm-3">Type</dt>
            <dd class="col-sm-9">{{ notification_type == 'email' ? 'Email' : 'SMS' }}</dd>

            <dt class="col-sm-3">Recipient</dt>
            <dd class="col-sm-9"><code>{{ notification.recipient }}</code></dd>

            {% if notification_type == 'email' %}
            <dt class="col-sm-3">Subject</dt>
            <dd class="col-sm-9">{{ notification.subject }}</dd>
            <dt class="col-sm-3">Body</dt>
            <dd class="col-sm-9">{{ notification.body }}</dd>
            {% else %}
            <dt class="col-sm-3">Message</dt>
            <dd class="col-sm-9">{{ notification.message }}</dd>
            {% endif %}

            <dt class="col-sm-3">Created at</dt>
            <dd class="col-sm-9">{{ notification.createdAt ? notification.createdAt|date('Y-m-d H:i:s') : '-' }}</dd>

            {% if hasAnonymizedColumn|default(false) and notification.anonymized|default(false) %}
            <dt class="col-sm-3">Anonymized</dt>
            <dd class="col-sm-9">{% include '_anonymized_badge.html.twig' with {value: notification.anonymized} %}</dd>
            {% endif %}
        </dl>
    </div>
</div>
{% endblock %}
