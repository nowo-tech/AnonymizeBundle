{% extends 'base.html.twig' %}

{% block title %}User Activity #{{ activity._id }} - MongoDB{% endblock %}

{% block body %}
{% include '_breadcrumbs.html.twig' with {entityName: 'User Activities', isMongo: true, routePrefix: 'mongodb_user_activity', currentPage: 'Show'} %}
<div class="alert alert-info" role="alert">
    <strong>ℹ️ Anonymized Fields</strong><br>
    The following fields in this document are configured for anonymization:
    <ul class="mb-0 mt-2">
        <li><strong>userEmail</strong> - Email faker</li>
        <li><strong>userName</strong> - Name faker</li>
        <li><strong>ipAddress</strong> - IP address faker</li>
        <li><strong>timestamp</strong> - Date faker (past dates, range: -1 year to now)</li>
        <li><strong>metadata</strong> - Name faker (for metadata fields)</li>
    </ul>
</div>

<div class="card shadow-sm">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h2 class="mb-0">User Activity Details <span class="badge bg-success connection-badge">MongoDB</span></h2>
        <div class="btn-group">
            <a href="{{ path('mongodb_user_activity_edit', {id: activity._id}) }}" class="btn btn-primary">Edit</a>
            <a href="{{ path('mongodb_user_activity_index') }}" class="btn btn-secondary">Back to List</a>
        </div>
    </div>
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-3">ID</dt>
            <dd class="col-sm-9">{{ activity._id }}</dd>

            <dt class="col-sm-3">User Email</dt>
            <dd class="col-sm-9">{{ activity.userEmail ?? '-' }}</dd>

            <dt class="col-sm-3">User Name</dt>
            <dd class="col-sm-9">{{ activity.userName ?? '-' }}</dd>

            <dt class="col-sm-3">IP Address</dt>
            <dd class="col-sm-9">{{ activity.ipAddress ?? '-' }}</dd>

            <dt class="col-sm-3">Action</dt>
            <dd class="col-sm-9"><span class="badge bg-info">{{ activity.action ?? '-' }}</span></dd>

            <dt class="col-sm-3">Timestamp</dt>
            <dd class="col-sm-9">
                {% if activity.timestamp %}
                    {{ activity.timestamp.toDateTime()|date('Y-m-d H:i:s') }}
                {% else %}
                    -
                {% endif %}
            </dd>

            <dt class="col-sm-3">Metadata</dt>
            <dd class="col-sm-9">
                {% if activity.metadata %}
                    <pre class="bg-light p-3 rounded"><code>{{ activity.metadata|json_encode(constant('JSON_PRETTY_PRINT')) }}</code></pre>
                {% else %}
                    -
                {% endif %}
            </dd>

            <dt class="col-sm-3">Anonymized</dt>
            <dd class="col-sm-9">
                {% if activity.anonymized|default(false) %}
                                    {% include '_anonymized_badge.html.twig' with {value: activity.anonymized|default(false)} %}
                                {% endif %}
            </dd>
        </dl>
    </div>
</div>
{% endblock %}
