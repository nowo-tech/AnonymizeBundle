{% extends 'base.html.twig' %}

{% block title %}Employee #{{ employee.id }} - {{ connection|upper }}{% endblock %}

{% block body %}
{% if not hasAnonymizedColumn|default(false) %}
<div class="alert alert-warning" style="background: #fff3cd; border: 1px solid #ffc107; color: #856404; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
    <strong>⚠️ Column "anonymized" not found</strong><br>
    To add the anonymization tracking column, run:<br>
    <code style="background: #f8f9fa; padding: 5px 10px; border-radius: 3px; display: inline-block; margin-top: 10px;">
        php bin/console nowo:anonymize:generate-column-migration --connection {{ connection }}
    </code>
</div>
{% endif %}

<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2>Employee Details <span class="connection-badge {{ connection }}">{{ connection }}</span></h2>
        <div>
            <a href="{{ path('employee_index', {connection: connection}) }}" class="btn btn-secondary">Back to List</a>
            <a href="{{ path('employee_edit', {connection: connection, id: employee.id}) }}" class="btn btn-primary">Edit</a>
        </div>
    </div>

    <table>
        <tbody>
            <tr>
                <th style="width: 200px;">ID</th>
                <td>{{ employee.id }}</td>
            </tr>
            <tr>
                <th>First Name</th>
                <td>{{ employee.firstName }}</td>
            </tr>
            <tr>
                <th>Last Name</th>
                <td>{{ employee.lastName }}</td>
            </tr>
            <tr>
                <th>Username</th>
                <td>{{ employee.username }}</td>
            </tr>
            <tr>
                <th>Email</th>
                <td>{{ employee.email }}</td>
            </tr>
            <tr>
                <th>Phone</th>
                <td>{{ employee.phone ?? 'N/A' }}</td>
            </tr>
            <tr>
                <th>Birth Date</th>
                <td>{{ employee.birthDate ? employee.birthDate|date('Y-m-d') : 'N/A' }}</td>
            </tr>
            <tr>
                <th>Age</th>
                <td>{{ employee.age }}</td>
            </tr>
            <tr>
                <th>Department</th>
                <td>{{ employee.department }}</td>
            </tr>
            <tr>
                <th>Previous Company</th>
                <td>{{ employee.previousCompany ?? 'N/A' }}</td>
            </tr>
            <tr>
                <th>Hire Date</th>
                <td>{{ employee.hireDate ? employee.hireDate|date('Y-m-d H:i:s') : 'N/A' }}</td>
            </tr>
            {% if hasAnonymizedColumn and employee.anonymized %}
            <tr>
                <th>Anonymized</th>
                <td>
                    <span style="background: #dc3545; color: white; padding: 4px 8px; border-radius: 3px; font-size: 12px;">Yes</span>
                </td>
            </tr>
            {% endif %}
        </tbody>
    </table>
</div>
{% endblock %}
